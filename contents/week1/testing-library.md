---
description: Jest와 React Testing Library
---

# Testing Library

> 내가 과거에 했던 프로젝트에서는 테스트없이 기능을 개발했다. 처음 한두가지에서는 문제가 없었지만 기능이 복잡하거나 여러 유닛이 겹쳐질 때 생기는 문제에 대해서 미리 대비하지 못하고 그때그때 처리할 수 밖에 없었다. 그러다보면 코드가 지저분해지고, 다시 되돌릴 수도 없었으며 앞으로 유지보수 할 생각에 눈 앞이 깜깜했다. 다시는 이런 일이 없었으면 하는 마음으로 테스팅에 대해 배워보려고 한다.

과거에는 웹이 복잡하지 않아 테스트가 필요하지 않았지만, 점차 프론트엔드가 복잡해지고 다양한 프레임워크와 라이브러리가 생겨나면서 프론트엔드 관리와 코드 퀄리티의 중요성이 대두되고 있다. 테스트로 인해 원하는 시나리오대로 동작이 잘 되는지 확인할 수 있고, 디버깅이 쉬워져 차후 유지보수 하거나 코드를 수정할 때도 안정적으로 진행할 수 있다.



## 테스트 종류

### 단위 테스트(Unit Test)

프로젝트의 가장 작은 단위를 테스트한다. 단위는 단일 컴포넌트(함수), 단일 서비스가 될 수 있다.

단위가 작기 때문에 간단하고 명확하며 빠르게 실행 가능하고, 해당 로직이 어떤 역할을 하는지 쉽게 파악할 수 있다. 또, 코드를 리팩토링 할 때 안정성을 확보할 수 있다.

단, 기능이 자주 바뀔 가능성이 있는 프로젝트에는 부적합할 수 있다.

- 개발 도구 : Jest 등

### 통합 테스트(Integration Test)

다른 모듈 간의 상호작용에 대해서 검사하는 테스트다. 단위 테스트가 검증됐어도 모듈 간에 상호작용이 원활하지 않으면 원하는 동작을 제대로 하지 못할 수 있기 때문에 진행할 필요가 있다.

다만 테스트를 위해 사전 조건이 필요한 경우도 있어 단위 테스트보다 복잡할 수 있다.

- 개발 도구 : Cypress 등

### E2E 테스트(End-to-End Test / UI Test)

E2E(End to End) 테스트는 실제 사용자가 사용하게 될 시나리오에 대한 테스트로, 화면에서의 애플리케이션 동작은 물론 백엔드도 (데이터가 잘 출력되는지) 검증할 수 있다.

실제 사용자의 동작과 동일하게 테스트되기 때문에 윈도우 사이즈 변경, 실제 키보드 입력 등 자바스크립트 만으로 할 수 없는 테스트를 진행할 수 있다. 또한, 단위테스트에서 발견하지 못한 테스트 환경의 예상치 못한 이슈들(네트워크 이슈, 타임아웃 등)도 E2E 테스트에서 발견될 수 있다.

사용자가 사용하는 화면에 대한 테스트이므로 중간에 코드가 변경되더라도 결과 화면이 같다면 테스트를 변경할 필요가 없다는 장점이 있다.

다만, 전체를 테스트하기 위해선 굉장히 길고 많은 테스트가 필요하기 때문에 시간이 많지 않다면 꼭 필요한 부분만을 잘 골라 검증해야 한다.

- 개발 도구 : Puppeteer, Playwright 등

## Jest

Jest는 자바스크립트 테스팅 라이브러리이다.

Jest 이전에 자바스크립트에서 테스트를 하려면 Test Runner, Test Matcher, Test Mock 라이브러리 등 다양한 테스팅 라이브러리가 필요했다. 하지만 Jest는 이 모든걸 제공해주어 반응이 뜨거웠고, '테스팅 프레임워크' 라는 별칭도 붙었다.

### Jest 특징

1. 별도의 설정 없이 바로 사용할 수 있다.
2. 스냅샷 기능 제공 : 어떤 기능에 대한 구현을 바꾼 후에 테스트에 실패하면, `-u` 옵션으로 테스트 자체를 업데이트 시킬 수 있다.
3. 테스트 코드는 모두 분리되어 있다. 테스트가 동시에 진행되어 전체 테스트 시간을 줄여준다.

### Jest로 테스트하기

[Jest로 테스트하기 관련 페이지 이동](../week5/test.md#jest로-테스트-코드-작성하기)



## React Testing Library

React 애플리케이션의 유닛 테스트를 도와주는 도구이다. 실제 브라우저에서 보여지는 DOM을 기준으로 테스트를 작성하게 되어 애플리케이션의 특정 부분이 예상대로 동작되는지를 검증한다.

- 보통 Jest와 연동하여 테스트 코드를 작성한다.
- CRA 시 자동으로 설치된다.

### React Testing Library를 이용한 테스트

[React Testing Library를 이용한 테스트 관련 페이지 이동](../week5/test.md#react-testing-library를-이용한-테스트)



## BDD 스타일로 테스트하기

### given-when-then

[Test 페이지의 given-when-then 항목으로 이동](../week5/test.md#given-when-then)

### Describe-Context-It

BDD는 Behavior Driven Development의 약자로, 테스트를 시나리오 기반으로 작성하는 것을 말한다. 아래의 예시처럼 하나의 describe 안에서 여러 개의 context, it 을 사용하여 테스트 할 수 있다.

추가적인 설명은 [Test 페이지의 Describe-Context-It 항목](../week5/test.md#describe-context-it)에 정리해뒀다.
